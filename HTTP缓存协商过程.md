# HTTP 缓存协商过程

缓存在计算机领域可以说是一个非常重要的提升性能的思想

CPU 有缓存, 内存也有缓存, 网络当然也能有缓存.

### Why?

**缓存的意义在于: 减少直接访问资源, 可以让获取资源的速度更快, 同时也减小了直接访问资源带来的性能和网络流量的开销**



### How?

HTTP缓存是**通过服务器在响应资源的报文头中添加首部字段实现的**

##### 简单来说

![简单来说是这样的](/Users/ming/Desktop/a.png)

当然也不能这么简单了..

##### cache-control

**`Cache-Control`** 通用消息头被用于在 http 请求和响应中通过指定指令来实现缓存机制.

它主要有以下这些值: 

```
max-age=<seconds> 设置缓存存储的最大周期，超过这个时间缓存被认为过期 (单位秒)

max-stale[=<seconds>]  表面客户端愿意接收一个已经过期的资源。 可选的设置一个时间 (单位秒)，表示响应不能超过的过时时间。

min-fresh=<seconds> 表示客户端希望在指定的时间内获取最新的响应

no-cache 强制所有缓存了该响应的缓存用户，在使用已存储的缓存数据前，发送带验证器的请求到原始服务器

no-store 直接禁止游览器缓存数据，每次用户请求该资源，都会向服务器发送一个请求，每次都会下载完整的资源

only-if-cached  
表明如果缓存存在，只使用缓存，无论原始服务器数据是否有更新。

must-revalidate
缓存必须在使用之前验证旧资源的状态，并且不可使用过期资源

public 
表明响应可以被任何对象（包括：发送请求的客户端，代理服务器，等等）缓存。

private  
表明响应只能被单个用户缓存，不能作为共享缓存（即代理服务器不能缓存它）。
```

































